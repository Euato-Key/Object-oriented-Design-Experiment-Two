# 物联网设备知识图谱交互管理平台 - 实验二报告

## 05. 子系统D详细设计：知识图谱分析与智能服务

### 1. 子系统概述
子系统D是平台的智能核心，基于知识图谱技术提供深度数据分析和智能决策支持。
**负责人**：林世颖
**核心职责**：
- 知识图谱构建与更新
- 智能分析与预测（预测性维护）
- 关联关系挖掘
- 数据服务API

### 2. 静态结构设计 (类图)
本子系统核心类包括`GraphBuilder`（图谱构建器）、`PredictionService`（预测服务）、`GraphQueryEngine`（图查询引擎）等。

**类图说明：**
- `GraphBuilder` 负责从异构数据源中抽取实体和关系，构建图谱。
- `PredictionService` 封装了机器学习模型的调用逻辑，执行预测任务。
- `GraphQueryEngine` 提供复杂的图查询能力，如影响范围分析。

![子系统D类图](./diagrams/class_diagram_D.mmd)

### 3. 动态行为设计

#### 3.1 顺序图 (Sequence Diagram) - 预测性维护分析 (UC-D-003)
该顺序图描述了用户发起设备预测性维护分析的异步处理流程。

**流程描述：**
1. 用户请求对特定设备进行预测分析。
2. 系统创建异步任务并立即返回任务ID。
3. 任务后台拉取设备历史数据。
4. 调用机器学习模型进行推理。
5. 生成包含维护建议的报告。
6. 用户查看报告。

![预测性维护分析顺序图](./diagrams/sequence_diagram_D_predict.mmd)

#### 3.2 状态图 (State Diagram) - 预测任务状态
该状态图描述了预测分析任务的生命周期。

**状态说明：**
- **FetchingData**: 正在准备数据。
- **Analyzing**: 模型正在进行计算。
- **GeneratingReport**: 正在生成最终报告。
- **Completed**: 任务完成，结果可查。

![预测任务状态图](./diagrams/state_diagram_D_predict.mmd)

#### 3.3 活动图 (Activity Diagram) - 预测性维护分析流程
该活动图描述了预测分析任务的执行过程，从数据准备到报告生成。

![预测性维护活动图](./diagrams/activity_diagram_D_predict.mmd)

### 5. 用户接口/界面原型设计

#### 5.1 界面交互流程
知识图谱分析主要涉及图谱可视化和智能分析报告的查看。
1. **图谱探索**：用户在“图谱分析”页通过搜索实体，查看其关联关系。
2. **影响分析**：点击节点查看故障影响范围。
3. **报告查看**：查看系统生成的预测性维护分析报告。

#### 5.2 界面原型引用
- **分析报告页**：展示预测性维护分析结果。
  - 原型文件：[ui/analysis_report.html](../ui/analysis_report.html)
- **图谱分析页**：展示知识图谱拓扑结构。
  - 原型文件：[ui/topology.html](../ui/topology.html)

---
*下一部分：数据库设计*
