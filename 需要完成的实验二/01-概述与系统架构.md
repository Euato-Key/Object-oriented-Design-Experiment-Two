# 物联网设备知识图谱交互管理平台 - 实验二报告

## 01. 概述与系统架构

### 1. 概述

#### 1.1 背景
随着物联网技术的飞速发展，海量的智能设备被部署到各个领域。设备数量的激增和设备类型的多样化，使得传统的、基于孤立数据点的设备管理方式面临巨大挑战。主要问题包括数据孤岛、关联分析薄弱以及管理效率瓶颈。本平台旨在利用知识图谱技术，构建一个统一的、智能化的设备管理中枢。

#### 1.2 目的
本实验报告旨在基于“4+1”视图模型，对“物联网设备知识图谱交互管理平台”进行详细的系统设计。通过逻辑视图、开发视图、物理视图、进程视图和场景视图的描述，全面展示系统的架构设计和实现方案。

#### 1.3 范围
本平台涵盖设备全生命周期管理、知识图谱构建与存储、关联关系可视化与分析以及子系统协同。
核心子系统包括：
- **子系统A**：设备接入与安全认证
- **子系统B**：设备监控与安全运维
- **子系统C**：设备资产与配置管理
- **子系统D**：知识图谱分析与智能服务

#### 1.4 定义及缩写
| 缩写 | 定义 |
| :--- | :--- |
| IoT | Internet of Things，物联网 |
| MQTT | Message Queuing Telemetry Transport，消息队列遥测传输协议 |
| RBAC | Role-Based Access Control，基于角色的访问控制 |
| TLS | Transport Layer Security，传输层安全协议 |
| KG | Knowledge Graph，知识图谱 |

#### 1.5 参考文档
1. 《物联网设备知识图谱交互管理平台需求规格说明书》
2. 《UML系统分析与设计》
3. 实验一报告：系统需求分析与用例建模


### 2. 系统架构设计 ("4+1" 视图)

#### 2.1 场景视图 (Scenarios View)
场景视图通过用例来描述系统的功能需求，是其他视图的驱动力。
*(详细用例列表请参考实验一报告，此处仅列出核心业务场景)*

- **核心场景1：设备接入与认证**
  - 设备发起连接 -> 网关拦截 -> 子系统A验证证书 -> 建立安全通道 -> 更新在线状态。
- **核心场景2：设备故障告警与处理**
  - 设备上报异常数据 -> 子系统B检测阈值 -> 触发告警 -> 运维人员查看 -> 调用子系统D分析关联影响 -> 运维人员下发控制指令。
- **核心场景3：知识图谱构建与分析**
  - 新设备注册/配置变更 -> 子系统D抽取实体关系 -> 更新图数据库 -> 用户查询设备拓扑。

#### 2.2 逻辑视图 (Logical View)
逻辑视图关注系统的功能性需求，即系统为用户提供什么服务。我们采用分层架构和模块化设计。

**系统逻辑架构图：**
![系统逻辑架构图](./diagrams/system_architecture.mmd)
- **表现层**：Web前端（HTML/CSS/JS），提供可视化交互界面。
- **业务逻辑层**：包含四个核心子系统的业务逻辑处理。
- **数据访问层**：负责与各类数据库（MySQL, Neo4j, InfluxDB）进行交互。

#### 2.3 开发视图 (Development View)
开发视图关注软件模块的组织和管理。系统被划分为独立的子系统包，各子系统之间通过定义良好的接口进行通信。

- **Package `com.iot.platform.access` (子系统A)**: 负责协议解析、证书管理、连接会话。
- **Package `com.iot.platform.monitor` (子系统B)**: 负责数据流处理、规则引擎、告警服务。
- **Package `com.iot.platform.asset` (子系统C)**: 负责设备档案CRUD、配置管理。
- **Package `com.iot.platform.graph` (子系统D)**: 负责图谱构建算法、图查询服务。

#### 2.4 物理视图 (Physical View)
物理视图描述软件到硬件的映射，关注系统的非功能性需求如性能、可扩展性。

**系统部署图：**
![系统部署图](../diagrams/deployment_view.mmd)

- **设备端**：运行轻量级Agent或通过网关接入。
- **服务端**：采用微服务架构部署在云服务器或私有服务器集群上。
- **数据库**：
  - **MySQL**: 存储结构化业务数据（用户、设备档案）。
  - **Neo4j**: 存储设备知识图谱数据。
  - **InfluxDB**: 存储设备时序监控数据。

#### 2.5 进程视图 (Process View)
进程视图关注系统的并发性、分布性、系统完整性和容错性。

- **消息驱动机制**：子系统间通过消息队列（如Kafka/RabbitMQ）进行异步解耦。例如，子系统A接收到设备数据后，投递到消息队列，子系统B订阅并消费数据进行监控，子系统D订阅数据进行图谱更新。
- **并发处理**：设备接入层采用Netty等NIO框架处理高并发连接。

---
*下一部分：子系统A详细设计*
